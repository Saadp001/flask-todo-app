{% extends "base.html" %}

{% block head %}
<title>Todo List</title>
{% endblock %}

{% block body %}
    <div class="content">

        <h1>Task Smash</h1>

        {% if tasks|length == 0 %}
            <p>No tasks added yet!</p>
        {% else %}

        <table>
            <tr>
                <th>Task</th>
                <th>date</th>
                <th>status</th>
                <th>Actions</th>

            </tr>

            <!-- Display tasks from the database, iterate over tasks variable passed from Flask -->
            {% for task in tasks %}  
            <tr class="{% if task.status == 'completed' %}completed{% endif %}">
                <td>{{ task.content }}</td>
                <td>{{ task.date_created.strftime("%Y-%m-%d")}}</td>

                <td>
                    {% if task.status == 'completed' %}
                        <span class="badge bg-success">Completed</span>
                    {% else %}
                        <a href="{{ url_for('complete', id=task.id) }}" class="btn btn-done">pending</a>
                    {% endif %}
                </td>

                <td>
                    <a href="/edit/{{ task.id }}" class="btn btn-edit">Edit</a>
                    <a href="/delete/{{ task.id }}" class="btn btn-delete">delete</a>
                    
                </td>
            </tr>
            {% endfor %}
        </table>
        {% endif %}

        <form class="form-container" action="/", method="POST">
            <input type="text" name="content" id="content_box" placeholder="Enter the task" />
            <input type="submit" value="Add Task" id="btn_add"/>
        </form>
        
    </div>
 
{% endblock %}    